(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/pages/music/music"],{318:function(e,t,n){"use strict";(function(e){n(5);r(n(3));var t=r(n(319));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},319:function(e,t,n){"use strict";n.r(t);var r=n(320),o=n(322);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n(327),n(329);var i,s=n(17),c=Object(s["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"6209218a",null,!1,r["components"],i);c.options.__file="subpkg/pages/music/music.vue",t["default"]=c.exports},320:function(e,t,n){"use strict";n.r(t);var r=n(321);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},321:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return r}));try{r={uTabs:function(){return n.e("uview-ui/components/u-tabs/u-tabs").then(n.bind(null,445))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,459))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement;e._self._c},a=!1,i=[];o._withStripped=!0},322:function(e,t,n){"use strict";n.r(t);var r=n(323),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},323:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(9)),o=n(12),a=n(324),i=n(732),s=l(n(325)),c=l(n(326)),u=l(n(81));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,s,"next",e)}function s(e){d(a,r,o,i,s,"throw",e)}i(void 0)}))}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){n.e("components/dropball/dropball").then(function(){return resolve(n(413))}.bind(null,n)).catch(n.oe)},y=function(){n.e("components/audio/audioplay").then(function(){return resolve(n(422))}.bind(null,n)).catch(n.oe)},v={components:{dropball:m,musicAudio:y},data:function(){var e;return e={background:{backgroundColor:"#FFFFFF"},barStyle:{backgroundColor:"#FF445A"},current:0,play:s.default,playActive:c.default,list:[{name:"找音效",id:0},{name:"找音乐",id:2}],sortingitem:[{name:"综合",nameType:"comprehensive",sorting:1,sequence:!1,id:1},{name:"播放",sorting:0,nameType:"play",sequence:!1,id:2},{name:"下载",sorting:0,nameType:"download",sequence:!1,id:3}],tagParameter:{page:1,size:10,type:0,comprehensive:1,play:0,download:0,search:""},musicData:[]},g(e,"play",s.default),g(e,"playActive",c.default),g(e,"worksplay","https://www.peiyinstreet.com/guidang/play.png"),g(e,"worksplayActive","https://www.peiyinstreet.com/guidang/palyActive.png"),g(e,"scrollInto",0),g(e,"scrollTop",0),g(e,"cate",1),g(e,"dataList",[]),g(e,"dataPlay",{url:""}),g(e,"audioShow",!1),g(e,"has_next",""),g(e,"dataObj",{teacher_id:"",service_id:"",status:1,filename:"",content_url_escape:"",work_id:"",avatar:"",nickname:"",offer_price:""}),g(e,"triggered",!1),g(e,"_freshing",!1),g(e,"placeholderText","搜索音效关键词"),g(e,"defaultshow",!1),e},onShareAppMessage:function(e){return"button"===e.from&&console.log(e.target),{title:"别处要花钱买的音效素材，这里免费下载。赶紧收藏",desc:"",complete:function(e){console.log("分享成功",e)}}},computed:h({},(0,o.mapState)("user",["token","userInfo","workStatus"])),onLoad:function(e){this.current=e.type,console.log("this.currue的值0",this.current),this.getUnionid()},onHide:function(){this.musicClose(),e.setStorageSync("worksType","")},methods:h(h({},(0,o.mapActions)("user",["login"])),{},{getUnionid:function(){var t=this;e.login({provider:"weixin",success:function(){var e=f(r.default.mark((function e(n){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("this.currue的值4",t.current),e.next=3,t.login(n.code);case 3:t.tagParameter.type=t.current,t.handleGetvoiceList();case 5:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),fail:function(e){console.log("登录失败",e)}})},change:function(e){console.log("点击的tabs",e),this.current=e,this.tagParameter={page:1,size:10,type:e,comprehensive:1,play:0,download:0},0==this.current?this.placeholderText="搜索音效关键词":1==this.current&&(this.placeholderText="搜索音乐关键词"),this.handleGetvoiceList()},handleChangeSorting:function(e,t){var n=this;this.sortingitem.map((function(r,o){e.id===r.id?0==n.sortingitem[t].sorting?(n.sortingitem[t].sorting=1,n.tagParameter[r.nameType]=1):1==n.sortingitem[t].sorting?(n.sortingitem[t].sorting=2,n.tagParameter[r.nameType]=2):2==n.sortingitem[t].sorting&&(n.sortingitem[t].sorting=1,n.tagParameter[r.nameType]=1):(r.sorting=0,n.tagParameter[r.nameType]=0)})),this.tagParameter.page=1,console.log("上传参数",this.tagParameter),this.handleGetvoiceList()},handleSearch:function(e){console.log("dengyuduoshao",e),this.tagParameter.page=1,this.handleGetvoiceList()},handleGetvoiceList:function(){var e=this;(0,a.voiceList)(this.tagParameter).then((function(t){console.log("音乐音效数据",t),e.musicData=t.data,e.triggered=!1,e._freshing=!1,e.scrollInto=e.scrollTop,e.currentStatus=e.current,0===e.musicData.length?(e.has_next="",e.defaultshow=!0):(e.has_next=t.has_next,e.defaultshow=!1),setTimeout((function(){e.scrollInto=0}),0)}))},handlerefre:function(){this.tagParameter.page=1,this.triggered=!0,this._freshing=!0,console.log("测试下来刷新复位问题",this.triggered,this._freshing),this.handleGetvoiceList()},reachBottom:function(){var e=this;return f(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.has_next){t.next=12;break}return e.tagParameter.page=e.tagParameter.page+1,t.next=4,(0,a.voiceList)(e.tagParameter);case 4:n=t.sent,console.log("res新数据",n),e.triggered=!1,e.has_next=n.has_next,n.data.map((function(t){e.musicData.push(t)})),0===e.musicData.length?(e.defaultshow=!0,e.has_next=""):e.defaultshow=!1,t.next=12;break;case 12:case"end":return t.stop()}}),t)})))()},tabScoll:function(e){this.scrollTop=e.detail.scrollTop},playTheMusic:function(e){var t=this;console.log("传过来的数据",e),this.audioShow=!0,this.dataPlay.url===e.url?this.musicData.map((function(n){t.dataPlay===n?e.playStatus=!e.playStatus:n.playStatus=!1})):(this.musicData.map((function(e){e.playStatus=!1})),e.playStatus=!0,this.dataPlay=e,(0,i.buriedSomeStatistical)(0)),(0,a.voicePlay)({voice_id:e.id,type:0}).then((function(e){console.log("播放下载成功+1",e)})),setTimeout((function(){t.$refs.musicAudio.preStartPlay()}),0)},handleChangePlay:function(e){var t=this;this.musicData.map((function(n){t.dataPlay===n?n.playStatus=e:n.playStatus=!1}))},musicClose:function(){this.musicData.map((function(e){e.playStatus=!1})),this.audioShow=!1,this.dataPlay={url:""}},downloadcopy:function(t,n){(0,a.voicePlay)({voice_id:t.id,type:1}).then((function(e){console.log("播放下载成功+1",e)})),(0,u.default)({content:t.url,success:function(t){e.showToast({title:n,icon:"none"})},error:function(e){}})}})};t.default=v}).call(this,n(1)["default"])},327:function(e,t,n){"use strict";n.r(t);var r=n(328),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},328:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var r=n(330),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},330:function(e,t,n){}},[[318,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/subpkg/pages/music/music.js.map