(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/demand/demand"],{86:function(e,t,n){"use strict";(function(e){n(5);o(n(3));var t=o(n(87));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},87:function(e,t,n){"use strict";n.r(t);var o=n(88),r=n(90);for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);n(93),n(95);var a,s=n(17),i=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"07e68366",null,!1,o["components"],a);i.options.__file="pages/demand/demand.vue",t["default"]=i.exports},88:function(e,t,n){"use strict";n.r(t);var o=n(89);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},89:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return u})),n.d(t,"components",(function(){return o}));try{o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,392))},uTabs:function(){return n.e("uview-ui/components/u-tabs/u-tabs").then(n.bind(null,445))},uCountDown:function(){return n.e("uview-ui/components/u-count-down/u-count-down").then(n.bind(null,452))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,459))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,466))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement;e._self._c},u=!1,a=[];r._withStripped=!0},90:function(e,t,n){"use strict";n.r(t);var o=n(91),r=n.n(o);for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=r.a},91:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(9)),r=n(92),u=n(46),a=n(12);function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o,r,u,a){try{var s=e[u](a),i=s.value}catch(c){return void n(c)}s.done?t(i):Promise.resolve(i).then(o,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var u=e.apply(t,n);function a(e){i(u,o,r,a,s,"next",e)}function s(e){i(u,o,r,a,s,"throw",e)}a(void 0)}))}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){n.e("components/audio/audioplay").then(function(){return resolve(n(422))}.bind(null,n)).catch(n.oe)},p={components:{musicAudio:h},data:function(){return{dataList:[],sharePopShow:!1,play:"https://www.peiyinstreet.com/guidang/play.png",playActive:"https://www.peiyinstreet.com/guidang/playActive.png",current:0,tabsHeight:0,groupId:"",defaultshow:!0,demObj:{page:1,size:10,status:0},barStyle:{backgroundColor:"#FF445A"},list:[{name:"发布需求",id:1},{name:"按样试音",id:2}],has_next:"",statusValue:["新建","邀请的试音","报价与付款","交付与验收"],securitiesShow:!1,couponsShow:!1,triggered:!1,_freshing:!1,couponsData:{}}},computed:l({},(0,a.mapState)("user",["demandcate"])),onLoad:function(){},onShow:function(){console.log("需求详情页0",this.demandcate,this.current),this.current=this.current,0===this.demandcate?(console.log("需求详情页1",this.demandcate,this.current),this.current=0,this.demObj.status=0,this.getOrderList(this.demObj),this.getCouponstatusStatus()):2===this.demandcate&&(console.log("需求详情页2",this.demandcate,this.current),this.current=1,this.demObj.status=1,this.getOrderList(this.demObj),this.getCouponstatusStatus()),this.current=this.current},onHide:function(){console.log("页面手动滑出会走这里吗")},onShareAppMessage:function(e){return"button"===e.from&&console.log(e.target),{title:"",desc:"",complete:function(e){console.log("分享成功",e)}}},methods:{handleJumpOrderDetails:function(t,n){var o=n-1;-1==o&&(o=0),console.log("",t),e.navigateTo({url:"/subpkg/pages/demanddetails/demanddetails?id="+t+"&status="+o})},handlerefre:function(){this.triggered=!0,this._freshing=!0,console.log("测试下来刷新复位问题",this.triggered,this._freshing),this.getOrderList(this.demObj)},reachBottom:function(){var e=this;return c(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.has_next){t.next=12;break}return e.demObj.page=e.demObj.page+1,t.next=4,(0,r.demandSquare)(e.demObj);case 4:n=t.sent,e.triggered=!1,e.has_next=n.has_next,n.data.map((function(t){e.dataList.push(t)})),console.log("的巨大师傅大萨达",e.dataList),0===e.dataList.length?(e.defaultshow=!1,e.has_next=""):e.defaultshow=!0,t.next=12;break;case 12:case"end":return t.stop()}}),t)})))()},getOrderList:function(e){var t=this;e.page=1,(0,r.demandSquare)(e).then((function(e){console.log("我的需求数据",e),t.triggered=!1,t._freshing=!1,t.$store.commit("user/setDemandcate",""),t.dataList=e.data,0===t.dataList.length?(t.has_next="",t.defaultshow=!1):(t.has_next=e.has_next,t.defaultshow=!0)}))},getCouponstatusStatus:function(){var e=this;(0,u.couponstatus)({status:0}).then((function(t){console.log("获取优惠卷的状态",t),t.data.coupon_status?e.securitiesShow=!1:e.securitiesShow=!0}))},handleCanceShare:function(){this.sharePopShow=!1,e.showShareMenu({title:"配音师资源"})},change:function(e){this.current=e,this.demObj.status=this.current,this.getOrderList(this.demObj)},onTabItemTap:function(){var e=this;(0,u.loginStatus)().then((function(t){0==t.data.nickname?e.getUserInfo():e.getOrderList(e.demObj)})).catch((function(e){console.log("返回错误信息",e)}))},getUserInfo:function(){var t=this;e.showLoading({title:"加载中"}),e.getUserProfile({desc:"登录后可发布需求",success:function(){var n=c(o.default.mark((function n(r){var a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showToast({title:"授权成功",icon:"default",mask:!0}),a={nickname:r.userInfo.nickName,userId:t.userId,avatar:r.userInfo.avatarUrl,phone:""},n.next=4,(0,u.profileUpdate)(a);case 4:t.getOrderList(t.demObj);case 5:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}(),fail:function(){e.showToast({title:"授权已取消",icon:"default",mask:!0})},complete:function(){e.hideLoading()}})},handleCouponCollection:function(){var t=this;(0,u.couponadd)().then((function(n){0===n.data.type?(t.couponsShow=!0,t.couponsData=n.data):e.showToast({title:"今天的券已经领取过啦",icon:"none",duration:2e3})})).catch((function(e){console.log("优惠卷错误信息",e)}))},handlecloseCollection:function(){this.securitiesShow=!1,(0,u.couponstatus)({status:1}).then((function(e){console.log("获取优惠卷的状态",e)}))},handlecloseCoupons:function(){this.couponsShow=!1},handleJumpPublishing:function(){console.log("跳转到发布"),e.navigateTo({url:"/subpkg/pages/release/release"})}}};t.default=p}).call(this,n(1)["default"])},93:function(e,t,n){"use strict";n.r(t);var o=n(94),r=n.n(o);for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=r.a},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var o=n(96),r=n.n(o);for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=r.a},96:function(e,t,n){}},[[86,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/demand/demand.js.map