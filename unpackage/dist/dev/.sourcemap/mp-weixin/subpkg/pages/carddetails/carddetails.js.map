{"version":3,"sources":["uni-app:///main.js","webpack:////Users/elliott/Desktop/dubbingStr2.0/subpkg/pages/carddetails/carddetails.vue?cd3f","webpack:////Users/elliott/Desktop/dubbingStr2.0/subpkg/pages/carddetails/carddetails.vue?e7dc","webpack:////Users/elliott/Desktop/dubbingStr2.0/subpkg/pages/carddetails/carddetails.vue?ca6a","webpack:////Users/elliott/Desktop/dubbingStr2.0/subpkg/pages/carddetails/carddetails.vue?5081","uni-app:///subpkg/pages/carddetails/carddetails.vue","webpack:////Users/elliott/Desktop/dubbingStr2.0/subpkg/pages/carddetails/carddetails.vue?2747","webpack:////Users/elliott/Desktop/dubbingStr2.0/subpkg/pages/carddetails/carddetails.vue?f0fd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uNavbar","uNoticeBar","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,6D,mDAFmBA,GAAGC,kCAAoCC,EAG1DC,EAAWC,a;;;;2DCHX,4VACIC,EADJ,qMAUIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2CACZ,aAAAF,E;;;;2GCxBf,gzC;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,8KAITC,WAAY,WACV,OAAO,uMAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCtCvB,g5BAAy1B,eAAG,G;;;;gJCsR51B,CACA,KADA,WAEA,OAEA,WAEA,oBACA,mBACA,YACA,gBACA,WACA,cACA,QACA,UACA,wBAKA,gCAEA,WACA,iBACA,sBACA,aACA,YACA,6BACA,iBACA,eAGA,kCACA,eACA,gBAEA,mBAEA,YAEA,aACA,WACA,4nBACA,8nBACA,goBACA,4oBACA,2oBAGA,stFAEA,gBACA,YACA,2BAEA,iBACA,SACA,UACA,UACA,cACA,cAIA,OA/DA,SA+DA,cACA,kBAEA,gCACA,oBAIA,mCACA,oBAGA,kCACA,mBAIA,OAhFA,WAgFA,WACA,uBAIA,cACA,sBACA,oBACA,oBACA,eACA,uCACA,IACA,wOACA,eACA,6CAIA,SAEA,UAFA,SAEA,GAEA,oBAEA,mBACA,WACA,yBACA,MACA,kBACA,gCACA,WAEA,mBAEA,mBACA,WACA,mBACA,MACA,YACA,oBACA,MACA,UACA,kBACA,MACA,kBACA,0BACA,MAEA,oBAEA,iCACA,kBACA,iBAGA,2BAEA,qCAKA,YA5CA,SA4CA,cACA,2BAGA,yBACA,wBACA,6BAEA,uBASA,IAPA,OACA,4IACA,wLACA,gLACA,mKAGA,mBACA,0CACA,gDACA,4CAEA,4CACA,wBAIA,wBACA,0BACA,2BACA,8BAIA,wBAEA,OAGA,WAnFA,WAqGA,IAhBA,OACA,gEACA,+IACA,+IAEA,kPACA,uOAGA,gEACA,8IACA,mIAKA,mBACA,0CACA,mDACA,4CAGA,eAEA,2BAEA,oBACA,2BACA,+BAMA,WAvHA,SAuHA,GAEA,oBACA,gBACA,iBACA,cACA,cACA,cAEA,UAIA,SApIA,WAqIA,gBACA,kBACA,eACA,iBACA,mBAEA,mBAIA,WA/IA,WAgJA,kCAGA,WAnJA,WAmJA,WACA,wBACA,uBACA,cACA,iBACA,MAGA,YA3JA,WA4JA,wBAGA,OA/JA,WAgKA,yBAGA,iBAnKA,WAoKA,cACA,wBAEA,mBAGA,SA1KA,SA0KA,cACA,kBACA,eACA,eACA,mCACA,oBACA,IADA,eACA,GACA,gBACA,uBACA,oBACA,qBACA,sBACA,oDACA,uBAPA,0CAeA,YA/LA,WAgMA,iBACA,gBACA,kBACA,mBAEA,mBAIA,SAzMA,SAyMA,GACA,qBAIA,cA9MA,WA+MA,qDACA,mBAIA,SApNA,WAsNA,GADA,kBACA,cAGA,sCACA,WACA,uBACA,kBAGA,aA/NA,SA+NA,cACA,gDACA,wBACA,qCAEA,IADA,qBACA,oBACA,WACA,aAGA,wCACA,2CAEA,OADA,0BACA,OAKA,0FAIA,QArPA,SAqPA,gBAEA,WACA,6CACA,IACA,iJAEA,kBAEA,uBACA,uCACA,IACA,2JAEA,iBACA,MAIA,WAxQA,SAwQA,GACA,sBAGA,YA5QA,SA4QA,GACA,sBAGA,UAhRA,SAgRA,GACA,6CACA,wCACA,sBAEA,kBArRA,SAqRA,GACA,sBAGA,iBAzRA,SAyRA,GACA,sBAGA,wBA7RA,SA6RA,GACA,sBAGA,gBAjSA,SAiSA,gBACA,gBACA,eACA,iBAEA,yBAEA,uBAEA,KACA,mBACA,MACA,WACA,oCACA,qBACA,cAGA,mBACA,MACA,eACA,sCACA,gBACA,cAEA,uBAEA,sGACA,kEACA,yCAGA,gBACA,wBAEA,MAIA,iBAxUA,WAwUA,WACA,yBACA,uBACA,oBACA,MAEA,cA9UA,SA8UA,KACA,iDACA,IACA,kDACA,mBAGA,UArVA,SAqVA,GACA,cACA,sCAIA,QA3VA,SA2VA,GACA,gBACA,iBACA,sBACA,wBAIA,UAnWA,SAmWA,GACA,oBACA,6BACA,2BACA,sBAIA,WA3WA,SA2WA,GACA,qBAGA,sCACA,kDACA,sCAGA,YApXA,SAoXA,cACA,kBACA,sBACA,oBACA,yCACA,mBACA,MAGA,YA7XA,WA8XA,kBACA,sBACA,2BACA,iBACA,sBAGA,SArYA,SAqYA,GACA,mBAGA,mBAEA,2CACA,iBACA,6BAEA,iBACA,8BAIA,SApZA,SAoZA,GACA,iBAGA,kBACA,sBACA,2BACA,uBAGA,UA9ZA,SA8ZA,GAEA,GADA,gCACA,cAaA,0BAbA,CACA,qCACA,OACA,SACA,oBAEA,iCACA,uBACA,eACA,eACA,iBACA,wBAIA,kBAGA,YAlbA,WAmbA,kBACA,4BAEA,QAtbA,e;;;;2DCxXA,gkDAAkhD,eAAG,G;;;;;;;;2DCArhD,gkDAAkhD,eAAG,G","file":"subpkg/pages/carddetails/carddetails.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/pages/carddetails/carddetails.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./carddetails.vue?vue&type=template&id=d8ee9f56&\"\nvar renderjs\nimport script from \"./carddetails.vue?vue&type=script&lang=js&\"\nexport * from \"./carddetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./carddetails.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./carddetails.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/pages/carddetails/carddetails.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=template&id=d8ee9f56&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uNoticeBar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<u-navbar\n\t\t\t:is-back=\"true\"\n\t\t\t:title=\"'小精灵' \"\n\t\t\ttitle-size=\"36.232rpx\"\n\t\t\ttitle-color=\"#000000\"\n\t\t\t:border-bottom=\"false\"\n\t\t\t:background=\"background\"\n\t\t\tback-icon-color=\"#000000\"\n\t\t\t@custom-back=\"handleGoBack\"\n\t\t>\n\t\t<view slot=\"right\">\n            <view class=\"homeye\" @click=\"handleGoBack\">\n\t\t\t\t<image\n\t\t\t\t\tclass=\"homeye_img\"\n\t\t\t\t\tsrc=\"@/static/home/kefu.png\"\n\t\t\t\t\tmode=\"scaleToFill\"\n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\t\t</u-navbar>\n\t\t<view class=\"notice\">\n            <u-notice-bar mode=\"vertical\" :volume-icon=\"false\" :autoplay=\"false\" :duration=\"5000\" bg-color=\"#FF445A\" color=\"#FFFFFF\" font-size=\"25.362rpx\" :list=\"listtext\"></u-notice-bar>\n\t\t\t<image\n\t\t\t\tclass=\"closeicon\"\n\t\t\t\tsrc=\"@/static/home/close.png\"\n\t\t\t\tmode=\"scaleToFill\"\n\t\t\t\t@click=\"handlecloseerPopShow\"\n\t\t\t/>\n\t\t</view>\n\t\t<view class=\"content\" @touchstart=\"hideDrawer\">\n\t\t\t<scroll-view class=\"msg-list\" scroll-y=\"true\" :scroll-with-animation=\"scrollAnimation\" :scroll-top=\"scrollTop\" :scroll-into-view=\"scrollToView\" @scrolltoupper=\"loadHistory\" upper-threshold=\"50\">\n\t\t\t\t<!-- 加载历史数据waitingUI -->\n\t\t\t\t<view class=\"loading\">\n\t\t\t\t\t<view class=\"spinner\">\n\t\t\t\t\t\t<view class=\"rect1\"></view>\n\t\t\t\t\t\t<view class=\"rect2\"></view>\n\t\t\t\t\t\t<view class=\"rect3\"></view>\n\t\t\t\t\t\t<view class=\"rect4\"></view>\n\t\t\t\t\t\t<view class=\"rect5\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"row\" v-for=\"(row,index) in msgList\" :key=\"index\" :id=\"'msg'+row.msg.id\">\n\t\t\t\t\t<!-- 系统消息 -->\n\t\t\t\t\t<block v-if=\"row.type=='system'\" >\n\t\t\t\t\t\t<view class=\"system\">\n\t\t\t\t\t\t\t<!-- 文字消息 -->\n\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='text'\" class=\"text\">\n\t\t\t\t\t\t\t\t下午12:23\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<!-- 领取红包消息 -->\n\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='redEnvelope'\" class=\"red-envelope\">\n\t\t\t\t\t\t\t\t<image src=\"/static/img/red-envelope-chat.png\"></image>\n\t\t\t\t\t\t\t\t{{row.msg.content.text}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</block>\n\t\t\t\t\t<!-- 用户消息 -->\n\t\t\t\t\t<block v-if=\"row.type=='user'\">\n\t\t\t\t\t\t<!-- 自己发出的消息 -->\n\t\t\t\t\t\t<view class=\"my\" v-if=\"row.msg.userinfo.uid==myuid\">\n\t\t\t\t\t\t\t<!-- 左-消息 -->\n\t\t\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t\t\t<!-- 文字消息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='text'\" class=\"bubble\">\n\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.msg.content.text\"></rich-text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 语言消息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='voice'\" class=\"bubble voice\" @tap=\"playVoice(row.msg)\" :class=\"playMsgid == row.msg.id?'play':''\">\n\t\t\t\t\t\t\t\t\t<view class=\"length\">{{row.msg.content.length}}</view>\n\t\t\t\t\t\t\t\t\t<view class=\"icon my-voice\"></view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 订单未交付 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='quotation_paid'\" class=\"bubble quotation_paid\" @tap=\"playVoice(row.msg)\" :class=\"playMsgid == row.msg.id?'play':''\">\n\t\t\t\t\t\t\t\t\t<view class=\"quotation_title\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"quotation_logo_box\">\n\t\t\t\t\t\t\t\t\t\t\t<image\n\t\t\t\t\t\t\t\t\t\t\t    class=\"quotation_logo\"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/messge_icon/dingdan.png\"\n\t\t\t\t\t\t\t\t\t\t\t\tmode=\"scaleToFill\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"title_box\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"text u-line-1\">配音报价单</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"btn_box\">\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"false\" class=\"unpaid_btn\">待支付</view>\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"true\" class=\"paid_btn\">已支付</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"quotation_conten\">\n                                      <view class=\"order_title u-line-1\">品牌广告-党政机关-医疗机构</view>\n\t\t\t\t\t\t\t\t\t  <view class=\"order_details\">\n\t\t\t\t\t\t\t\t\t\t  <view class=\"order_left\">\n\t\t\t\t\t\t\t\t\t\t\t  <text>订单金额：</text>\n\t\t\t\t\t\t\t\t\t\t\t  <text>￥2000</text>\n\t\t\t\t\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t\t\t\t\t  <view class=\"order_right\">\n\t\t\t\t\t\t\t\t\t\t\t  <text>交付时限：</text>\n\t\t\t\t\t\t\t\t\t\t\t  <text>2h</text>\n\t\t\t\t\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 图片消息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='img'\" class=\"bubble img\" @tap=\"showPic(row.msg)\">\n\t\t\t\t\t\t\t\t\t<image :src=\"row.msg.content.url\" :style=\"{'width': row.msg.content.w+'px','height': row.msg.content.h+'px'}\"></image>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 红包 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='redEnvelope'\" class=\"bubble red-envelope\" @tap=\"openRedEnvelope(row.msg,index)\">\n\t\t\t\t\t\t\t\t\t<image src=\"/static/img/red-envelope.png\"></image>\n\t\t\t\t\t\t\t\t\t<view class=\"tis\">\n\t\t\t\t\t\t\t\t\t\t<!-- 点击开红包 -->\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"blessing\">\n\t\t\t\t\t\t\t\t\t\t{{row.msg.content.blessing}}\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<!-- 右-头像 -->\n\t\t\t\t\t\t\t<view class=\"right\">\n\t\t\t\t\t\t\t\t<image :src=\"row.msg.userinfo.face\"></image>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- 别人发出的消息 -->\n\t\t\t\t\t\t<view class=\"other\" v-if=\"row.msg.userinfo.uid!=myuid\">\n\t\t\t\t\t\t\t<!-- 左-头像 -->\n\t\t\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t\t\t<image :src=\"row.msg.userinfo.face\"></image>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<!-- 右-用户名称-时间-消息 -->\n\t\t\t\t\t\t\t<view class=\"right\">\n\t\t\t\t\t\t\t\t<!-- 文字消息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='text'\" class=\"bubble\">\n\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.msg.content.text\"></rich-text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 语音消息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='voice'\" class=\"bubble voice\" @tap=\"playVoice(row.msg)\" :class=\"playMsgid == row.msg.id?'play':''\">\n\t\t\t\t\t\t\t\t\t<view class=\"icon other-voice\"></view>\n\t\t\t\t\t\t\t\t\t<view class=\"length\">{{row.msg.content.length}}</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 订单未交付 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='quotation_unpaid'\" class=\"bubble quotation_paid\" @tap=\"playVoice(row.msg)\" :class=\"playMsgid == row.msg.id?'play':''\">\n\t\t\t\t\t\t\t\t\t<view class=\"quotation_title\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"quotation_logo_box\">\n\t\t\t\t\t\t\t\t\t\t\t<image\n\t\t\t\t\t\t\t\t\t\t\t    class=\"quotation_logo\"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"@/static/messge_icon/dingdan.png\"\n\t\t\t\t\t\t\t\t\t\t\t\tmode=\"scaleToFill\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"title_box\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"text u-line-1\">配音报价单</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"btn_box\">\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"true\" class=\"unpaid_btn\">待支付</view>\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"false\" class=\"paid_btn\">已支付</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"quotation_conten\">\n                                      <view class=\"order_title u-line-1\">品牌广告-党政机关-医疗机构</view>\n\t\t\t\t\t\t\t\t\t  <view class=\"order_details\">\n\t\t\t\t\t\t\t\t\t\t  <view class=\"order_left\">\n\t\t\t\t\t\t\t\t\t\t\t  <text>订单金额：</text>\n\t\t\t\t\t\t\t\t\t\t\t  <text>￥2000</text>\n\t\t\t\t\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t\t\t\t\t  <view class=\"order_right\">\n\t\t\t\t\t\t\t\t\t\t\t  <text>交付时限：</text>\n\t\t\t\t\t\t\t\t\t\t\t  <text>2h</text>\n\t\t\t\t\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 图片消息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='img'\" class=\"bubble img\" @tap=\"showPic(row.msg)\">\n\t\t\t\t\t\t\t\t\t<image :src=\"row.msg.content.url\" :style=\"{'width': row.msg.content.w+'px','height': row.msg.content.h+'px'}\"></image>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 红包 -->\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='redEnvelope'\" class=\"bubble red-envelope\" @tap=\"openRedEnvelope(row.msg,index)\">\n\t\t\t\t\t\t\t\t\t<image src=\"/static/img/red-envelope.png\"></image>\n\t\t\t\t\t\t\t\t\t<view class=\"tis\">\n\t\t\t\t\t\t\t\t\t\t<!-- 点击开红包 -->\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"blessing\">\n\t\t\t\t\t\t\t\t\t\t{{row.msg.content.blessing}}\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</block>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t<!-- 抽屉栏 -->\n\t\t<view class=\"popup-layer\" :class=\"popupLayerClass\" @touchmove.stop.prevent=\"discard\">\n\t\t\t<!-- 表情 --> \n\t\t\t<swiper class=\"emoji-swiper\" :class=\"{hidden:hideEmoji}\" indicator-dots=\"true\" duration=\"150\">\n\t\t\t\t<swiper-item v-for=\"(page,pid) in emojiList\" :key=\"pid\">\n\t\t\t\t\t<view v-for=\"(em,eid) in page\" :key=\"eid\" @tap=\"addEmoji(em)\">\n\t\t\t\t\t\t<image mode=\"widthFix\" :src=\"'/static/img/emoji/'+em.url\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</swiper-item>\n\t\t\t</swiper>\n\t\t\t<!-- 更多功能 相册-拍照-红包 -->\n\t\t\t<view class=\"more-layer\" :class=\"{hidden:hideMore}\">\n\t\t\t\t<view class=\"list\">\n\t\t\t\t\t<view class=\"box\" @tap=\"chooseImage\"><view class=\"icon tupian2\"></view></view>\n\t\t\t\t\t<view class=\"box\" @tap=\"camera\"><view class=\"icon paizhao\"></view></view>\n\t\t\t\t\t<view class=\"box\" @tap=\"handRedEnvelopes\"><view class=\"icon hongbao\"></view></view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 底部输入栏 -->\n\t\t<view class=\"input-box\" :class=\"popupLayerClass\" @touchmove.stop.prevent=\"discard\">\n\t\t\t<!-- H5下不能录音，输入栏布局改动一下 -->\n\t\t\t<!-- #ifndef H5 -->\n\t\t\t<view class=\"voice\">\n\t\t\t\t<view class=\"icon\" :class=\"isVoice?'jianpan':'yuyin'\" @tap=\"switchVoice\"></view>\n\t\t\t</view>\n\t\t\t<!-- #endif -->\n\t\t\t<!-- #ifdef H5 -->\n\t\t\t<view class=\"more\" @tap=\"showMore\">\n\t\t\t\t<view class=\"icon add\"></view>\n\t\t\t</view>\n\t\t\t<!-- #endif -->\n\t\t\t<view class=\"textbox\">\n\t\t\t\t<view class=\"voice-mode\" :class=\"[isVoice?'':'hidden',recording?'recording':'']\" @touchstart=\"voiceBegin\" @touchmove.stop.prevent=\"voiceIng\" @touchend=\"voiceEnd\" @touchcancel=\"voiceCancel\">{{voiceTis}}</view>\n\t\t\t\t<view class=\"text-mode\"  :class=\"isVoice?'hidden':''\">\n\t\t\t\t\t<view class=\"box\">\n\t\t\t\t\t\t<textarea auto-height=\"true\" v-model=\"textMsg\" @focus=\"textareaFocus\"/>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"em\" @tap=\"chooseEmoji\">\n\t\t\t\t\t\t<view class=\"icon biaoqing\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<!-- #ifndef H5 -->\n\t\t\t<view class=\"more\" @tap=\"showMore\">\n\t\t\t\t<view class=\"icon add\"></view>\n\t\t\t</view>\n\t\t\t<!-- #endif -->\n\t\t\t<view class=\"send\" :class=\"isVoice?'hidden':''\" @tap=\"sendText\">\n\t\t\t\t<view class=\"btn\">发送</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 录音UI效果 -->\n\t\t<view class=\"record\" :class=\"recording?'':'hidden'\">\n\t\t\t<view class=\"ing\" :class=\"willStop?'hidden':''\"><view class=\"icon luyin2\" ></view></view>\n\t\t\t<view class=\"cancel\" :class=\"willStop?'':'hidden'\"><view class=\"icon chehui\" ></view></view>\n\t\t\t<view class=\"tis\" :class=\"willStop?'change':''\">{{recordTis}}</view>\n\t\t</view>\n\t\t<!-- 红包弹窗 -->\n\t\t<view class=\"windows\" :class=\"windowsState\">\n\t\t\t<!-- 遮罩层 -->\n\t\t\t<view class=\"mask\" @touchmove.stop.prevent=\"discard\" @tap=\"closeRedEnvelope\"></view>\n\t\t\t<view class=\"layer\" @touchmove.stop.prevent=\"discard\">\n\t\t\t\t<view class=\"open-redenvelope\">\n\t\t\t\t\t<view class=\"top\">\n\t\t\t\t\t\t<view class=\"close-btn\">\n\t\t\t\t\t\t\t<view class=\"icon close\" @tap=\"closeRedEnvelope\"></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<image src=\"/static/img/im/face/face_1.jpg\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"from\">来自{{redenvelopeData.from}}</view>\n\t\t\t\t\t<view class=\"blessing\">{{redenvelopeData.blessing}}</view>\n\t\t\t\t\t<view class=\"money\">{{redenvelopeData.money}}</view>\n\t\t\t\t\t<view class=\"showDetails\" @tap=\"toDetails(redenvelopeData.rid)\">\n\t\t\t\t\t\t查看领取详情 <view class=\"icon to\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t</view>\n\t</view>\n</template>\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t//文字消息\n\t\t\t\ttextMsg:'',\n\t\t\t\t//消息列表\n\t\t\t\tisHistoryLoading:false,\n\t\t\t\tscrollAnimation:false,\n\t\t\t\tscrollTop:0,\n\t\t\t\tscrollToView:'',\n\t\t\t\tmsgList:[],\n\t\t\t\tmsgImgList:[],\n\t\t\t\tmyuid:0,\n\t\t\t\tlisttext: [\n\t\t\t\t\t'请勿交换个人联系方式或私下联系！否则将会',\n\t\t\t\t],\n\t\t\t\t//录音相关参数\n\t\t\t\t// #ifndef H5\n\t\t\t\t//H5不能录音\n\t\t\t\tRECORDER:uni.getRecorderManager(),\n\t\t\t\t// #endif\n\t\t\t\tisVoice:false,\n\t\t\t\tvoiceTis:'按住 说话',\n\t\t\t\trecordTis:\"手指上滑 取消发送\",\n\t\t\t\trecording:false,\n\t\t\t\twillStop:false,\n\t\t\t\tinitPoint:{identifier:0,Y:0},\n\t\t\t\trecordTimer:null,\n\t\t\t\trecordLength:0,\n\t\t\t\t\n\t\t\t\t//播放语音相关参数\n\t\t\t\tAUDIO:uni.createInnerAudioContext(),\n\t\t\t\tplayMsgid:null,\n\t\t\t\tVoiceTimer:null,\n\t\t\t\t// 抽屉参数\n\t\t\t\tpopupLayerClass:'',\n\t\t\t\t// more参数\n\t\t\t\thideMore:true,\n\t\t\t\t//表情定义\n\t\t\t\thideEmoji:true,\n\t\t\t\temojiList:[\n\t\t\t\t\t[{\"url\":\"100.gif\",alt:\"[微笑]\"},{\"url\":\"101.gif\",alt:\"[伤心]\"},{\"url\":\"102.gif\",alt:\"[美女]\"},{\"url\":\"103.gif\",alt:\"[发呆]\"},{\"url\":\"104.gif\",alt:\"[墨镜]\"},{\"url\":\"105.gif\",alt:\"[哭]\"},{\"url\":\"106.gif\",alt:\"[羞]\"},{\"url\":\"107.gif\",alt:\"[哑]\"},{\"url\":\"108.gif\",alt:\"[睡]\"},{\"url\":\"109.gif\",alt:\"[哭]\"},{\"url\":\"110.gif\",alt:\"[囧]\"},{\"url\":\"111.gif\",alt:\"[怒]\"},{\"url\":\"112.gif\",alt:\"[调皮]\"},{\"url\":\"113.gif\",alt:\"[笑]\"},{\"url\":\"114.gif\",alt:\"[惊讶]\"},{\"url\":\"115.gif\",alt:\"[难过]\"},{\"url\":\"116.gif\",alt:\"[酷]\"},{\"url\":\"117.gif\",alt:\"[汗]\"},{\"url\":\"118.gif\",alt:\"[抓狂]\"},{\"url\":\"119.gif\",alt:\"[吐]\"},{\"url\":\"120.gif\",alt:\"[笑]\"},{\"url\":\"121.gif\",alt:\"[快乐]\"},{\"url\":\"122.gif\",alt:\"[奇]\"},{\"url\":\"123.gif\",alt:\"[傲]\"}],\n\t\t\t\t\t[{\"url\":\"124.gif\",alt:\"[饿]\"},{\"url\":\"125.gif\",alt:\"[累]\"},{\"url\":\"126.gif\",alt:\"[吓]\"},{\"url\":\"127.gif\",alt:\"[汗]\"},{\"url\":\"128.gif\",alt:\"[高兴]\"},{\"url\":\"129.gif\",alt:\"[闲]\"},{\"url\":\"130.gif\",alt:\"[努力]\"},{\"url\":\"131.gif\",alt:\"[骂]\"},{\"url\":\"132.gif\",alt:\"[疑问]\"},{\"url\":\"133.gif\",alt:\"[秘密]\"},{\"url\":\"134.gif\",alt:\"[乱]\"},{\"url\":\"135.gif\",alt:\"[疯]\"},{\"url\":\"136.gif\",alt:\"[哀]\"},{\"url\":\"137.gif\",alt:\"[鬼]\"},{\"url\":\"138.gif\",alt:\"[打击]\"},{\"url\":\"139.gif\",alt:\"[bye]\"},{\"url\":\"140.gif\",alt:\"[汗]\"},{\"url\":\"141.gif\",alt:\"[抠]\"},{\"url\":\"142.gif\",alt:\"[鼓掌]\"},{\"url\":\"143.gif\",alt:\"[糟糕]\"},{\"url\":\"144.gif\",alt:\"[恶搞]\"},{\"url\":\"145.gif\",alt:\"[什么]\"},{\"url\":\"146.gif\",alt:\"[什么]\"},{\"url\":\"147.gif\",alt:\"[累]\"}],\n\t\t\t\t\t[{\"url\":\"148.gif\",alt:\"[看]\"},{\"url\":\"149.gif\",alt:\"[难过]\"},{\"url\":\"150.gif\",alt:\"[难过]\"},{\"url\":\"151.gif\",alt:\"[坏]\"},{\"url\":\"152.gif\",alt:\"[亲]\"},{\"url\":\"153.gif\",alt:\"[吓]\"},{\"url\":\"154.gif\",alt:\"[可怜]\"},{\"url\":\"155.gif\",alt:\"[刀]\"},{\"url\":\"156.gif\",alt:\"[水果]\"},{\"url\":\"157.gif\",alt:\"[酒]\"},{\"url\":\"158.gif\",alt:\"[篮球]\"},{\"url\":\"159.gif\",alt:\"[乒乓]\"},{\"url\":\"160.gif\",alt:\"[咖啡]\"},{\"url\":\"161.gif\",alt:\"[美食]\"},{\"url\":\"162.gif\",alt:\"[动物]\"},{\"url\":\"163.gif\",alt:\"[鲜花]\"},{\"url\":\"164.gif\",alt:\"[枯]\"},{\"url\":\"165.gif\",alt:\"[唇]\"},{\"url\":\"166.gif\",alt:\"[爱]\"},{\"url\":\"167.gif\",alt:\"[分手]\"},{\"url\":\"168.gif\",alt:\"[生日]\"},{\"url\":\"169.gif\",alt:\"[电]\"},{\"url\":\"170.gif\",alt:\"[炸弹]\"},{\"url\":\"171.gif\",alt:\"[刀子]\"}],\n\t\t\t\t\t[{\"url\":\"172.gif\",alt:\"[足球]\"},{\"url\":\"173.gif\",alt:\"[瓢虫]\"},{\"url\":\"174.gif\",alt:\"[翔]\"},{\"url\":\"175.gif\",alt:\"[月亮]\"},{\"url\":\"176.gif\",alt:\"[太阳]\"},{\"url\":\"177.gif\",alt:\"[礼物]\"},{\"url\":\"178.gif\",alt:\"[抱抱]\"},{\"url\":\"179.gif\",alt:\"[拇指]\"},{\"url\":\"180.gif\",alt:\"[贬低]\"},{\"url\":\"181.gif\",alt:\"[握手]\"},{\"url\":\"182.gif\",alt:\"[剪刀手]\"},{\"url\":\"183.gif\",alt:\"[抱拳]\"},{\"url\":\"184.gif\",alt:\"[勾引]\"},{\"url\":\"185.gif\",alt:\"[拳头]\"},{\"url\":\"186.gif\",alt:\"[小拇指]\"},{\"url\":\"187.gif\",alt:\"[拇指八]\"},{\"url\":\"188.gif\",alt:\"[食指]\"},{\"url\":\"189.gif\",alt:\"[ok]\"},{\"url\":\"190.gif\",alt:\"[情侣]\"},{\"url\":\"191.gif\",alt:\"[爱心]\"},{\"url\":\"192.gif\",alt:\"[蹦哒]\"},{\"url\":\"193.gif\",alt:\"[颤抖]\"},{\"url\":\"194.gif\",alt:\"[怄气]\"},{\"url\":\"195.gif\",alt:\"[跳舞]\"}],\n\t\t\t\t\t[{\"url\":\"196.gif\",alt:\"[发呆]\"},{\"url\":\"197.gif\",alt:\"[背着]\"},{\"url\":\"198.gif\",alt:\"[伸手]\"},{\"url\":\"199.gif\",alt:\"[耍帅]\"},{\"url\":\"200.png\",alt:\"[微笑]\"},{\"url\":\"201.png\",alt:\"[生病]\"},{\"url\":\"202.png\",alt:\"[哭泣]\"},{\"url\":\"203.png\",alt:\"[吐舌]\"},{\"url\":\"204.png\",alt:\"[迷糊]\"},{\"url\":\"205.png\",alt:\"[瞪眼]\"},{\"url\":\"206.png\",alt:\"[恐怖]\"},{\"url\":\"207.png\",alt:\"[忧愁]\"},{\"url\":\"208.png\",alt:\"[眨眉]\"},{\"url\":\"209.png\",alt:\"[闭眼]\"},{\"url\":\"210.png\",alt:\"[鄙视]\"},{\"url\":\"211.png\",alt:\"[阴暗]\"},{\"url\":\"212.png\",alt:\"[小鬼]\"},{\"url\":\"213.png\",alt:\"[礼物]\"},{\"url\":\"214.png\",alt:\"[拜佛]\"},{\"url\":\"215.png\",alt:\"[力量]\"},{\"url\":\"216.png\",alt:\"[金钱]\"},{\"url\":\"217.png\",alt:\"[蛋糕]\"},{\"url\":\"218.png\",alt:\"[彩带]\"},{\"url\":\"219.png\",alt:\"[礼物]\"},]\t\t\t\t\n\t\t\t\t],\n\t\t\t\t//表情图片图床名称 ，由于我上传的第三方图床名称会有改变，所以有此数据来做对应，您实际应用中应该不需要\n\t\t\t\tonlineEmoji:{\"100.gif\":\"AbNQgA.gif\",\"101.gif\":\"AbN3ut.gif\",\"102.gif\":\"AbNM3d.gif\",\"103.gif\":\"AbN8DP.gif\",\"104.gif\":\"AbNljI.gif\",\"105.gif\":\"AbNtUS.gif\",\"106.gif\":\"AbNGHf.gif\",\"107.gif\":\"AbNYE8.gif\",\"108.gif\":\"AbNaCQ.gif\",\"109.gif\":\"AbNN4g.gif\",\"110.gif\":\"AbN0vn.gif\",\"111.gif\":\"AbNd3j.gif\",\"112.gif\":\"AbNsbV.gif\",\"113.gif\":\"AbNwgs.gif\",\"114.gif\":\"AbNrD0.gif\",\"115.gif\":\"AbNDuq.gif\",\"116.gif\":\"AbNg5F.gif\",\"117.gif\":\"AbN6ET.gif\",\"118.gif\":\"AbNcUU.gif\",\"119.gif\":\"AbNRC4.gif\",\"120.gif\":\"AbNhvR.gif\",\"121.gif\":\"AbNf29.gif\",\"122.gif\":\"AbNW8J.gif\",\"123.gif\":\"AbNob6.gif\",\"124.gif\":\"AbN5K1.gif\",\"125.gif\":\"AbNHUO.gif\",\"126.gif\":\"AbNIDx.gif\",\"127.gif\":\"AbN7VK.gif\",\"128.gif\":\"AbNb5D.gif\",\"129.gif\":\"AbNX2d.gif\",\"130.gif\":\"AbNLPe.gif\",\"131.gif\":\"AbNjxA.gif\",\"132.gif\":\"AbNO8H.gif\",\"133.gif\":\"AbNxKI.gif\",\"134.gif\":\"AbNzrt.gif\",\"135.gif\":\"AbU9Vf.gif\",\"136.gif\":\"AbUSqP.gif\",\"137.gif\":\"AbUCa8.gif\",\"138.gif\":\"AbUkGQ.gif\",\"139.gif\":\"AbUFPg.gif\",\"140.gif\":\"AbUPIS.gif\",\"141.gif\":\"AbUZMn.gif\",\"142.gif\":\"AbUExs.gif\",\"143.gif\":\"AbUA2j.gif\",\"144.gif\":\"AbUMIU.gif\",\"145.gif\":\"AbUerq.gif\",\"146.gif\":\"AbUKaT.gif\",\"147.gif\":\"AbUmq0.gif\",\"148.gif\":\"AbUuZV.gif\",\"149.gif\":\"AbUliF.gif\",\"150.gif\":\"AbU1G4.gif\",\"151.gif\":\"AbU8z9.gif\",\"152.gif\":\"AbU3RJ.gif\",\"153.gif\":\"AbUYs1.gif\",\"154.gif\":\"AbUJMR.gif\",\"155.gif\":\"AbUadK.gif\",\"156.gif\":\"AbUtqx.gif\",\"157.gif\":\"AbUUZ6.gif\",\"158.gif\":\"AbUBJe.gif\",\"159.gif\":\"AbUdIO.gif\",\"160.gif\":\"AbU0iD.gif\",\"161.gif\":\"AbUrzd.gif\",\"162.gif\":\"AbUDRH.gif\",\"163.gif\":\"AbUyQA.gif\",\"164.gif\":\"AbUWo8.gif\",\"165.gif\":\"AbU6sI.gif\",\"166.gif\":\"AbU2eP.gif\",\"167.gif\":\"AbUcLt.gif\",\"168.gif\":\"AbU4Jg.gif\",\"169.gif\":\"AbURdf.gif\",\"170.gif\":\"AbUhFS.gif\",\"171.gif\":\"AbU5WQ.gif\",\"172.gif\":\"AbULwV.gif\",\"173.gif\":\"AbUIzj.gif\",\"174.gif\":\"AbUTQs.gif\",\"175.gif\":\"AbU7yn.gif\",\"176.gif\":\"AbUqe0.gif\",\"177.gif\":\"AbUHLq.gif\",\"178.gif\":\"AbUOoT.gif\",\"179.gif\":\"AbUvYF.gif\",\"180.gif\":\"AbUjFU.gif\",\"181.gif\":\"AbaSSJ.gif\",\"182.gif\":\"AbUxW4.gif\",\"183.gif\":\"AbaCO1.gif\",\"184.gif\":\"Abapl9.gif\",\"185.gif\":\"Aba9yR.gif\",\"186.gif\":\"AbaFw6.gif\",\"187.gif\":\"Abaiex.gif\",\"188.gif\":\"AbakTK.gif\",\"189.gif\":\"AbaZfe.png\",\"190.gif\":\"AbaEFO.gif\",\"191.gif\":\"AbaVYD.gif\",\"192.gif\":\"AbamSH.gif\",\"193.gif\":\"AbaKOI.gif\",\"194.gif\":\"Abanld.gif\",\"195.gif\":\"Abau6A.gif\",\"196.gif\":\"AbaQmt.gif\",\"197.gif\":\"Abal0P.gif\",\"198.gif\":\"AbatpQ.gif\",\"199.gif\":\"Aba1Tf.gif\",\"200.png\":\"Aba8k8.png\",\"201.png\":\"AbaGtS.png\",\"202.png\":\"AbaJfg.png\",\"203.png\":\"AbaNlj.png\",\"204.png\":\"Abawmq.png\",\"205.png\":\"AbaU6s.png\",\"206.png\":\"AbaaXn.png\",\"207.png\":\"Aba000.png\",\"208.png\":\"AbarkT.png\",\"209.png\":\"AbastU.png\",\"210.png\":\"AbaB7V.png\",\"211.png\":\"Abafn1.png\",\"212.png\":\"Abacp4.png\",\"213.png\":\"AbayhF.png\",\"214.png\":\"Abag1J.png\",\"215.png\":\"Aba2c9.png\",\"216.png\":\"AbaRXR.png\",\"217.png\":\"Aba476.png\",\"218.png\":\"Abah0x.png\",\"219.png\":\"Abdg58.png\"},\n\t\t\t\t//红包相关参数\n\t\t\t\twindowsState:'',\n\t\t\t\tbackground: {\n\t\t\t\t  backgroundColor: '#ffffff',\n\t\t\t    },\n\t\t\t\tredenvelopeData:{\n\t\t\t\t\trid:null,\t//红包ID\n\t\t\t\t\tfrom:null,\n\t\t\t\t\tface:null,\n\t\t\t\t\tblessing:null,\n\t\t\t\t\tmoney:null\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tonLoad(option) {\n\t\t\tthis.getMsgList();\n\t\t\t//语音自然播放结束\n\t\t\tthis.AUDIO.onEnded((res)=>{\n\t\t\t\tthis.playMsgid=null;\n\t\t\t});\n\t\t\t// #ifndef H5\n\t\t\t//录音开始事件\n\t\t\tthis.RECORDER.onStart((e)=>{\n\t\t\t\tthis.recordBegin(e);\n\t\t\t})\n\t\t\t//录音结束事件\n\t\t\tthis.RECORDER.onStop((e)=>{\n\t\t\t\tthis.recordEnd(e);\n\t\t\t})\n\t\t\t// #endif\n\t\t},\n\t\tonShow(){\n\t\t\tthis.scrollTop = 9999999;\n\t\t\t\n\t\t\t//模板借由本地缓存实现发红包效果，实际应用中请不要使用此方法。\n\t\t\t//\n\t\t\tuni.getStorage({\n\t\t\t\tkey: 'redEnvelopeData',\n\t\t\t\tsuccess:  (res)=>{\n\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\tlet nowDate = new Date();\n\t\t\t\t\tlet lastid = this.msgList[this.msgList.length-1].msg.id;\n\t\t\t\t\tlastid++;\n\t\t\t\t\tlet row = {type:\"user\",msg:{id:lastid,type:\"redEnvelope\",time:nowDate.getHours()+\":\"+nowDate.getMinutes(),userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:{blessing:res.data.blessing,rid:Math.floor(Math.random()*1000+1),isReceived:false}}};\n\t\t\t\t\tthis.screenMsg(row);\n\t\t\t\t\tuni.removeStorage({key: 'redEnvelopeData'});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmethods:{\n\t\t\t// 接受消息(筛选处理)\n\t\t\tscreenMsg(msg){\n\t\t\t\t//从长连接处转发给这个方法，进行筛选处理\n\t\t\t\tif(msg.type=='system'){\n\t\t\t\t\t// 系统消息\n\t\t\t\t\tswitch (msg.msg.type){\n\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\tthis.addSystemTextMsg(msg);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'redEnvelope':\n\t\t\t\t\t\t\tthis.addSystemRedEnvelopeMsg(msg);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}else if(msg.type=='user'){\n\t\t\t\t\t// 用户消息\n\t\t\t\t\tswitch (msg.msg.type){\n\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\tthis.addTextMsg(msg);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'voice':\n\t\t\t\t\t\t\tthis.addVoiceMsg(msg);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'img':\n\t\t\t\t\t\t\tthis.addImgMsg(msg);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'redEnvelope':\n\t\t\t\t\t\t\tthis.addRedEnvelopeMsg(msg);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('用户消息');\n\t\t\t\t\t//非自己的消息震动\n\t\t\t\t\tif(msg.msg.userinfo.uid!=this.myuid){\n\t\t\t\t\t\tconsole.log('振动');\n\t\t\t\t\t\tuni.vibrateLong();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t// 滚动到底\n\t\t\t\t\tthis.scrollToView = 'msg'+msg.msg.id\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t//触发滑动到顶部(加载历史信息记录)\n\t\t\tloadHistory(e){\n\t\t\t\tif(this.isHistoryLoading){\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.isHistoryLoading = true;//参数作为进入请求标识，防止重复请求\n\t\t\t\tthis.scrollAnimation = false;//关闭滑动动画\n\t\t\t\tlet Viewid = this.msgList[0].msg.id;//记住第一个信息ID\n\t\t\t\t//本地模拟请求历史记录效果\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t// 消息列表\n\t\t\t\t\tlet list = [\n\t\t\t\t\t\t{type:\"user\",msg:{id:1,type:\"text\",time:\"12:56\",userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:{text:\"为什么温度会相差那么大？\"}}},\n\t\t\t\t\t\t{type:\"user\",msg:{id:2,type:\"text\",time:\"12:57\",userinfo:{uid:1,username:\"售后客服008\",face:\"/static/img/im/face/face_2.jpg\"},content:{text:\"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。\"}}},\n\t\t\t\t\t\t{type:\"user\",msg:{id:3,type:\"voice\",time:\"12:59\",userinfo:{uid:1,username:\"售后客服008\",face:\"/static/img/im/face/face_2.jpg\"},content:{url:\"/static/voice/1.mp3\",length:\"00:06\"}}},\n\t\t\t\t\t\t{type:\"user\",msg:{id:4,type:\"voice\",time:\"13:05\",userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:{url:\"/static/voice/2.mp3\",length:\"00:06\"}}},\n\t\t\t\t\t]\n\t\t\t\t\t// 获取消息中的图片,并处理显示尺寸\n\t\t\t\t\tfor(let i=0;i<list.length;i++){\n\t\t\t\t\t\tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\n\t\t\t\t\t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\n\t\t\t\t\t\t\tthis.msgImgList.unshift(list[i].msg.content.url);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist[i].msg.id = Math.floor(Math.random()*1000+1);\n\t\t\t\t\t\tthis.msgList.unshift(list[i]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//这段代码很重要，不然每次加载历史数据都会跳到顶部\n\t\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t\tthis.scrollToView = 'msg'+Viewid;//跳转上次的第一行信息位置\n\t\t\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t\t\tthis.scrollAnimation = true;//恢复滚动动画\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\tthis.isHistoryLoading = false;\n\t\t\t\t\t\n\t\t\t\t},1000)\n\t\t\t},\n\t\t\t// 加载初始页面消息\n\t\t\tgetMsgList(){\n\t\t\t\t// 消息列表\n\t\t\t\tlet list = [\n\t\t\t\t\t{type:\"system\",msg:{id:0,type:\"text\",content:{text:\"下午12:23\"}}},\n\t\t\t\t\t{type:\"user\",msg:{id:1,type:\"text\",time:\"12:56\",userinfo:{uid:0,username:\"小精灵\",face:\"/static/img/face.jpg\"},content:{text:\"您看这样行吗？我先发给你一份。\"}}},\n\t\t\t\t\t{type:\"user\",msg:{id:2,type:\"text\",time:\"12:57\",userinfo:{uid:1,username:\"客服\",face:\"/static/img/im/face/face_2.jpg\"},content:{text:\"好的，没问题\"}}},\n\t\t\t\t\t// {type:\"user\",msg:{id:3,type:\"text\",time:\"12:59\",userinfo:{uid:1,username:\"客服\",face:\"/static/img/im/face/face_2.jpg\"},content:{url:\"/static/voice/1.mp3\",length:\"00:06\"}}},\n\t\t\t\t\t{type:\"user\",msg:{id:4,type:\"quotation_unpaid\",time:\"13:05\",userinfo:{uid:1,username:\"客服\",face:\"/static/img/im/face/face_2.jpg\"},content:{title:\"品牌广告-党政机关-医疗机构\", orderAmount: '1500', url:\"/static/voice/2.mp3\", deliveryTime: '2h', length:\"00:06\"}}},\n\t\t\t\t\t{type:\"user\",msg:{id:4,type:\"quotation_paid\",time:\"13:05\",userinfo:{uid:0,username:\"小精灵\",face:\"/static/img/face.jpg\"},content:{title:\"品牌广告-党政机关-医疗机构\", orderAmount: '1500', url:\"/static/voice/2.mp3\", deliveryTime: '2h', length:\"00:06\"}}},\n\t\t\t\t\t// {type:\"user\",msg:{id:5,type:\"img\",time:\"13:05\",userinfo:{uid:0,username:\"小精灵\",face:\"/static/img/face.jpg\"},content:{url:\"/static/img/p10.jpg\",w:200,h:200}}},\n\t\t\t\t\t// {type:\"user\",msg:{id:6,type:\"img\",time:\"12:59\",userinfo:{uid:1,username:\"客服\",face:\"/static/img/im/face/face_2.jpg\"},content:{url:\"/static/img/q.jpg\",w:1920,h:1080}}},\n\t\t\t\t\t{type:\"system\",msg:{id:7,type:\"text\",content:{text:\"下午12:23\"}}},\n\t\t\t\t\t{type:\"user\",msg:{id:2,type:\"text\",time:\"12:57\",userinfo:{uid:1,username:\"客服\",face:\"/static/img/im/face/face_2.jpg\"},content:{text:\"已支付订单\"}}},\n\t\t\t\t\t{type:\"user\",msg:{id:1,type:\"text\",time:\"12:56\",userinfo:{uid:0,username:\"小精灵\",face:\"/static/img/face.jpg\"},content:{text:\"OK\"}}},\n\t\t\t\t\t// {type:\"user\",msg:{id:10,type:\"redEnvelope\",time:\"12:56\",userinfo:{uid:0,username:\"小精灵\",face:\"/static/img/face.jpg\"},content:{blessing:\"恭喜发财，大吉大利，万事如意\",rid:0,isReceived:false}}},\n\t\t\t\t\t// {type:\"user\",msg:{id:11,type:\"redEnvelope\",time:\"12:56\",userinfo:{uid:1,username:\"客服\",face:\"/static/img/im/face/face_2.jpg\"},content:{blessing:\"恭喜发财\",rid:1,isReceived:false}}},\n\t\t\t\t]\n\t\t\t\t// 获取消息中的图片,并处理显示尺寸\n\t\t\t\tfor(let i=0;i<list.length;i++){\n\t\t\t\t\tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\n\t\t\t\t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\n\t\t\t\t\t\tthis.msgImgList.push(list[i].msg.content.url);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.msgList = list;\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t//进入页面滚动到底部\n\t\t\t\t\tthis.scrollTop = 9999;\n\t\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t\tthis.scrollAnimation = true;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t},\n\t\t\t//处理图片尺寸，如果不处理宽高，新进入页面加载图片时候会闪\n\t\t\tsetPicSize(content){\n\t\t\t\t// 让图片最长边等于设置的最大长度，短边等比例缩小，图片控件真实改变，区别于aspectFit方式。\n\t\t\t\tlet maxW = uni.upx2px(350);//350是定义消息图片最大宽度\n\t\t\t\tlet maxH = uni.upx2px(350);//350是定义消息图片最大高度\n\t\t\t\tif(content.w>maxW||content.h>maxH){\n\t\t\t\t\tlet scale = content.w/content.h;\n\t\t\t\t\tcontent.w = scale>1?maxW:maxH*scale;\n\t\t\t\t\tcontent.h = scale>1?maxW/scale:maxH;\n\t\t\t\t}\n\t\t\t\treturn content;\n\t\t\t},\n\t\t\t\n\t\t\t//更多功能(点击+弹出) \n\t\t\tshowMore(){\n\t\t\t\tthis.isVoice = false;\n\t\t\t\tthis.hideEmoji = true;\n\t\t\t\tif(this.hideMore){\n\t\t\t\t\tthis.hideMore = false;\n\t\t\t\t\tthis.openDrawer();\n\t\t\t\t}else{\n\t\t\t\t\tthis.hideDrawer();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 打开抽屉\n\t\t\topenDrawer(){\n\t\t\t\tthis.popupLayerClass = 'showLayer';\n\t\t\t},\n\t\t\t// 隐藏抽屉\n\t\t\thideDrawer(){\n\t\t\t\tthis.popupLayerClass = '';\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.hideMore = true;\n\t\t\t\t\tthis.hideEmoji = true;\n\t\t\t\t},150);\n\t\t\t},\n\t\t\t// 选择图片发送\n\t\t\tchooseImage(){\n\t\t\t\tthis.getImage('album');\n\t\t\t},\n\t\t\t//拍照发送\n\t\t\tcamera(){\n\t\t\t\tthis.getImage('camera');\n\t\t\t},\n\t\t\t//发红包\n\t\t\thandRedEnvelopes(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:'HM-hand/HM-hand'\n\t\t\t\t});\n\t\t\t\tthis.hideDrawer();\n\t\t\t},\n\t\t\t//选照片 or 拍照\n\t\t\tgetImage(type){\n\t\t\t\tthis.hideDrawer();\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tsourceType:[type],\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\t\tsuccess: (res)=>{\n\t\t\t\t\t\tfor(let i=0;i<res.tempFilePaths.length;i++){\n\t\t\t\t\t\t\tuni.getImageInfo({\n\t\t\t\t\t\t\t\tsrc: res.tempFilePaths[i],\n\t\t\t\t\t\t\t\tsuccess: (image)=>{\n\t\t\t\t\t\t\t\t\tconsole.log(image.width);\n\t\t\t\t\t\t\t\t\tconsole.log(image.height);\n\t\t\t\t\t\t\t\t\tlet msg = {url:res.tempFilePaths[i],w:image.width,h:image.height};\n\t\t\t\t\t\t\t\t\tthis.sendMsg(msg,'img');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 选择表情\n\t\t\tchooseEmoji(){\n\t\t\t\tthis.hideMore = true;\n\t\t\t\tif(this.hideEmoji){\n\t\t\t\t\tthis.hideEmoji = false;\n\t\t\t\t\tthis.openDrawer();\n\t\t\t\t}else{\n\t\t\t\t\tthis.hideDrawer();\n\t\t\t\t}\n\t\t\t},\n\t\t\t//添加表情\n\t\t\taddEmoji(em){\n\t\t\t\tthis.textMsg+=em.alt;\n\t\t\t},\n\t\t\t\n\t\t\t//获取焦点，如果不是选表情ing,则关闭抽屉\n\t\t\ttextareaFocus(){\n\t\t\t\tif(this.popupLayerClass=='showLayer' && this.hideMore == false){\n\t\t\t\t\tthis.hideDrawer();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 发送文字消息\n\t\t\tsendText(){\n\t\t\t\tthis.hideDrawer();//隐藏抽屉\n\t\t\t\tif(!this.textMsg){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet content = this.replaceEmoji(this.textMsg);\n\t\t\t\tlet msg = {text:content}\n\t\t\t\tthis.sendMsg(msg,'text');\n\t\t\t\tthis.textMsg = '';//清空输入框\n\t\t\t},\n\t\t\t//替换表情符号为图片\n\t\t\treplaceEmoji(str){\n\t\t\t\tlet replacedStr = str.replace(/\\[([^(\\]|\\[)]*)\\]/g,(item, index)=>{\n\t\t\t\t\tconsole.log(\"item: \" + item);\n\t\t\t\t\tfor(let i=0;i<this.emojiList.length;i++){\n\t\t\t\t\t\tlet row = this.emojiList[i];\n\t\t\t\t\t\tfor(let j=0;j<row.length;j++){\n\t\t\t\t\t\t\tlet EM = row[j];\n\t\t\t\t\t\t\tif(EM.alt==item){\n\t\t\t\t\t\t\t\t//在线表情路径，图文混排必须使用网络路径，请上传一份表情到你的服务器后再替换此路径 \n\t\t\t\t\t\t\t\t//比如你上传服务器后，你的100.gif路径为https://www.xxx.com/emoji/100.gif 则替换onlinePath填写为https://www.xxx.com/emoji/\n\t\t\t\t\t\t\t\tlet onlinePath = 'https://s2.ax1x.com/2019/04/12/'\n\t\t\t\t\t\t\t\tlet imgstr = '<img src=\"'+onlinePath+this.onlineEmoji[EM.url]+'\">';\n\t\t\t\t\t\t\t\tconsole.log(\"imgstr: \" + imgstr);\n\t\t\t\t\t\t\t\treturn imgstr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn '<div style=\"display: flex;align-items: center;word-wrap:break-word;\">'+replacedStr+'</div>';\n\t\t\t},\n\t\t\t\n\t\t\t// 发送消息\n\t\t\tsendMsg(content,type){\n\t\t\t\t//实际应用中，此处应该提交长连接，模板仅做本地处理。\n\t\t\t\tvar nowDate = new Date();\n\t\t\t\tlet lastid = this.msgList[this.msgList.length-1].msg.id;\n\t\t\t\tlastid++;\n\t\t\t\tlet msg = {type:'user',msg:{id:lastid,time:nowDate.getHours()+\":\"+nowDate.getMinutes(),type:type,userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:content}}\n\t\t\t\t// 发送消息\n\t\t\t\tthis.screenMsg(msg);\n\t\t\t\t// 定时器模拟对方回复,三秒\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tlastid = this.msgList[this.msgList.length-1].msg.id;\n\t\t\t\t\tlastid++;\n\t\t\t\t\tmsg = {type:'user',msg:{id:lastid,time:nowDate.getHours()+\":\"+nowDate.getMinutes(),type:type,userinfo:{uid:1,username:\"售后客服008\",face:\"/static/img/im/face/face_2.jpg\"},content:content}}\n\t\t\t\t\t// 本地模拟发送消息\n\t\t\t\t\tthis.screenMsg(msg);\n\t\t\t\t},3000)\n\t\t\t},\n\t\t\t\n\t\t\t// 添加文字消息到列表\n\t\t\taddTextMsg(msg){\n\t\t\t\tthis.msgList.push(msg);\n\t\t\t},\n\t\t\t// 添加语音消息到列表\n\t\t\taddVoiceMsg(msg){\n\t\t\t\tthis.msgList.push(msg);\n\t\t\t},\n\t\t\t// 添加图片消息到列表\n\t\t\taddImgMsg(msg){\n\t\t\t\tmsg.msg.content = this.setPicSize(msg.msg.content);\n\t\t\t\tthis.msgImgList.push(msg.msg.content.url);\n\t\t\t\tthis.msgList.push(msg);\n\t\t\t},\n\t\t\taddRedEnvelopeMsg(msg){\n\t\t\t\tthis.msgList.push(msg);\n\t\t\t},\n\t\t\t// 添加系统文字消息到列表\n\t\t\taddSystemTextMsg(msg){\n\t\t\t\tthis.msgList.push(msg);\n\t\t\t},\n\t\t\t// 添加系统红包消息到列表\n\t\t\taddSystemRedEnvelopeMsg(msg){\n\t\t\t\tthis.msgList.push(msg);\n\t\t\t},\n\t\t\t// 打开红包\n\t\t\topenRedEnvelope(msg,index){\n\t\t\t\tlet rid = msg.content.rid;\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:'加载中...'\n\t\t\t\t});\n\t\t\t\tconsole.log(\"index: \" + index);\n\t\t\t\t//模拟请求服务器效果\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t//加载数据\n\t\t\t\t\tif(rid==0){\n\t\t\t\t\t\tthis.redenvelopeData={\n\t\t\t\t\t\t\trid:0,\t//红包ID\n\t\t\t\t\t\t\tfrom:\"大黑哥\",\n\t\t\t\t\t\t\tface:\"/static/img/im/face/face.jpg\",\n\t\t\t\t\t\t\tblessing:\"恭喜发财，大吉大利\",\n\t\t\t\t\t\t\tmoney:\"已领完\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.redenvelopeData={\n\t\t\t\t\t\t\trid:1,\t//红包ID\n\t\t\t\t\t\t\tfrom:\"售后客服008\",\n\t\t\t\t\t\t\tface:\"/static/img/im/face/face_2.jpg\",\n\t\t\t\t\t\t\tblessing:\"恭喜发财\",\n\t\t\t\t\t\t\tmoney:\"0.01\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!msg.content.isReceived){\n\t\t\t\t\t\t\t// {type:\"system\",msg:{id:8,type:\"redEnvelope\",content:{text:\"你领取了售后客服008的红包\"}}},\n\t\t\t\t\t\t\tthis.sendSystemMsg({text:\"你领取了\"+(msg.userinfo.uid==this.myuid?\"自己\":msg.userinfo.username)+\"的红包\"},'redEnvelope');\n\t\t\t\t\t\t\tconsole.log(\"this.msgList[index]: \" + JSON.stringify(this.msgList[index]));\n\t\t\t\t\t\t\tthis.msgList[index].msg.content.isReceived = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tthis.windowsState = 'show';\n\t\t\t\t\t\n\t\t\t\t},200)\n\t\t\t\t\n\t\t\t},\n\t\t\t// 关闭红包弹窗\n\t\t\tcloseRedEnvelope(){\n\t\t\t\tthis.windowsState = 'hide';\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.windowsState = '';\n\t\t\t\t},200)\n\t\t\t},\n\t\t\tsendSystemMsg(content,type){\n\t\t\t\tlet lastid = this.msgList[this.msgList.length-1].msg.id;\n\t\t\t\tlastid++;\n\t\t\t\tlet row = {type:\"system\",msg:{id:lastid,type:type,content:content}};\n\t\t\t\tthis.screenMsg(row)\n\t\t\t},\n\t\t\t//领取详情\n\t\t\ttoDetails(rid){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:'HM-details/HM-details?rid='+rid\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 预览图片\n\t\t\tshowPic(msg){\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tindicator:\"none\",\n\t\t\t\t\tcurrent:msg.content.url,\n\t\t\t\t\turls: this.msgImgList\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 播放语音\n\t\t\tplayVoice(msg){\n\t\t\t\tthis.playMsgid=msg.id;\n\t\t\t\tthis.AUDIO.src = msg.content.url;\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\tthis.AUDIO.play();\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 录音开始\n\t\t\tvoiceBegin(e){\n\t\t\t\tif(e.touches.length>1){\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t\tthis.initPoint.Y = e.touches[0].clientY;\n\t\t\t\tthis.initPoint.identifier = e.touches[0].identifier;\n\t\t\t\tthis.RECORDER.start({format:\"mp3\"});//录音开始,\n\t\t\t},\n\t\t\t//录音开始UI效果\n\t\t\trecordBegin(e){\n\t\t\t\tthis.recording = true;\n\t\t\t\tthis.voiceTis='松开 结束';\n\t\t\t\tthis.recordLength = 0;\n\t\t\t\tthis.recordTimer = setInterval(()=>{\n\t\t\t\t\tthis.recordLength++;\n\t\t\t\t},1000)\n\t\t\t},\n\t\t\t// 录音被打断\n\t\t\tvoiceCancel(){\n\t\t\t\tthis.recording = false;\n\t\t\t\tthis.voiceTis='按住 说话';\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\n\t\t\t\tthis.willStop = true;//不发送录音\n\t\t\t\tthis.RECORDER.stop();//录音结束\n\t\t\t},\n\t\t\t// 录音中(判断是否触发上滑取消发送)\n\t\t\tvoiceIng(e){\n\t\t\t\tif(!this.recording){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet touche = e.touches[0];\n\t\t\t\t//上滑一个导航栏的高度触发上滑取消发送\n\t\t\t\tif(this.initPoint.Y - touche.clientY>=uni.upx2px(100)){\n\t\t\t\t\tthis.willStop = true;\n\t\t\t\t\tthis.recordTis = '松开手指 取消发送'\n\t\t\t\t}else{\n\t\t\t\t\tthis.willStop = false;\n\t\t\t\t\tthis.recordTis = '手指上滑 取消发送'\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 结束录音\n\t\t\tvoiceEnd(e){\n\t\t\t\tif(!this.recording){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.recording = false;\n\t\t\t\tthis.voiceTis='按住 说话';\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\n\t\t\t\tthis.RECORDER.stop();//录音结束\n\t\t\t},\n\t\t\t//录音结束(回调文件)\n\t\t\trecordEnd(e){\n\t\t\t\tclearInterval(this.recordTimer);\n\t\t\t\tif(!this.willStop){\n\t\t\t\t\tconsole.log(\"e: \" + JSON.stringify(e));\n\t\t\t\t\tlet msg = {\n\t\t\t\t\t\tlength:0,\n\t\t\t\t\t\turl:e.tempFilePath\n\t\t\t\t\t}\n\t\t\t\t\tlet min = parseInt(this.recordLength/60);\n\t\t\t\t\tlet sec = this.recordLength%60;\n\t\t\t\t\tmin = min<10?'0'+min:min;\n\t\t\t\t\tsec = sec<10?'0'+sec:sec;\n\t\t\t\t\tmsg.length = min+':'+sec;\n\t\t\t\t\tthis.sendMsg(msg,'voice');\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('取消发送录音');\n\t\t\t\t}\n\t\t\t\tthis.willStop = false;\n\t\t\t},\n\t\t\t// 切换语音/文字输入\n\t\t\tswitchVoice(){\n\t\t\t\tthis.hideDrawer();\n\t\t\t\tthis.isVoice = this.isVoice?false:true;\n\t\t\t},\n\t\t\tdiscard(){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n</script>\n<style lang=\"scss\">\npage {\n\tbackground-color: #F2F2F2;\n}\n</style>\n<style lang=\"scss\">\n\t@import \"@/static/css/style.scss\"; \n\t.homeye {\n\t\tdisplay: flex;\n\t\twidth: 57.971rpx;\n\t\theight: 57.971rpx;\n\t\tborder-radius: 32.609rpx;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tbackground: white;\n\t}\n\t.homeye_img {\n\t\twidth: 28.986rpx;\n\t\theight: 28.986rpx;\n\t}\n\t.nick_nameT {\n\t\tmax-width: 450rpx;\n\t\tdisplay: inline-block;\n\t}\n\t.notice {\n\t\tposition: relative;\n\t\tz-index: 999999;\n\t\theight: 35px;\n\t\t.closeicon {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tright: 36.232rpx;\n\t\t\twidth: 28.986rpx;\n\t\t\theight: 28.986rpx;\n\t\t\ttransform: translate(0%,-50%);\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./carddetails.vue?vue&type=style&index=1&lang=scss&\""],"sourceRoot":""}